:root { 
  --bg: #0d0d0d; 
  --fg: #fafafa; 
  --muted: #737373; 
  --line: #262626; 
  --panel: #171717;
  --accent: #3b82f6;
  --border: #2a2a2a;
}
* { box-sizing:border-box }
body { 
  margin:0; 
  font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Inter, system-ui, sans-serif; 
  background: var(--bg); 
  color: var(--fg);
  -webkit-font-smoothing: antialiased;
}
.wrap { max-width:1200px; margin:0 auto; padding:24px }

/* Header */
.top { display:flex; justify-content:space-between; align-items:center; margin-bottom:24px }
.top h1 { font-size:28px; margin:0; font-weight:600; letter-spacing:-0.03em; background: linear-gradient(135deg, #fff 0%, #a1a1a1 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent }
.headerActions { display:flex; gap:12px; align-items:center }

/* View Toggle */
.viewToggle { display:flex; background:var(--panel); border:1px solid var(--border); border-radius:8px; padding:2px }
.viewToggle button { 
  background:transparent; border:none; color:var(--muted); padding:8px 10px; border-radius:6px; 
  display:flex; align-items:center; justify-content:center; transition:all .15s ease 
}
.viewToggle button:hover { color:var(--fg) }
.viewToggle button.active { background:var(--line); color:var(--fg) }

/* Summary Cards */
.summary { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-bottom:24px }
.summary>div { background:var(--panel); border:1px solid var(--border); padding:16px; border-radius:12px }
.summary strong { display:block; font-size:32px; font-weight:600; letter-spacing:-0.02em }
.summary span { color:var(--muted); font-size:13px; font-weight:500 }

/* Filters */
.filters { display:flex; gap:8px; margin-bottom:20px; overflow:auto; padding-bottom:4px }
.filters button { 
  border:1px solid var(--border); background:transparent; color:var(--muted); padding:10px 16px; 
  border-radius:20px; cursor:pointer; font-size:13px; font-weight:500; transition:all .15s ease; white-space:nowrap 
}
.filters button:hover { border-color:var(--muted); color:var(--fg) }
.filters button.on { background:var(--fg); color:var(--bg); border-color:var(--fg) }

/* List View */
.list { display:flex; flex-direction:column; gap:8px }
.row { 
  display:flex; justify-content:space-between; gap:16px; background:var(--panel); 
  border:1px solid var(--border); padding:18px 20px; border-radius:12px; cursor:pointer; 
  transition:all .18s ease 
}
.row:hover { border-color:#404040; transform:translateY(-2px); box-shadow:0 8px 24px rgba(0,0,0,.3) }
.row h3 { margin:0 0 6px 0; font-size:16px; font-weight:500; letter-spacing:-0.01em }
.row p { margin:0; color:var(--muted); font-size:13px }
.due { margin-top:10px; font-size:12px; color:var(--muted); display:inline-block; padding:4px 10px; background:var(--line); border-radius:6px }
.due[data-overdue="true"] { color:#ef4444; background:rgba(239,68,68,0.1) }
.meta { display:flex; flex-direction:column; gap:8px; align-items:flex-end; justify-content:center }
.status { font-size:11px; font-weight:600; padding:5px 10px; border-radius:6px; letter-spacing:0.02em }
.score { font-size:12px; color:var(--muted); font-weight:500 }

/* Kanban Board */
.board { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; overflow-x:auto; padding-bottom:8px }
.boardColumn { min-width:260px; background:var(--panel); border:1px solid var(--border); border-radius:12px; display:flex; flex-direction:column }
.columnHeader { padding:14px 16px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:8px; font-size:13px; font-weight:600 }
.columnDot { width:8px; height:8px; border-radius:50% }
.columnCount { margin-left:auto; background:var(--line); color:var(--muted); padding:2px 8px; border-radius:10px; font-size:11px }
.columnContent { padding:12px; display:flex; flex-direction:column; gap:10px; flex:1; overflow-y:auto; max-height:70vh }
.boardCard { background:var(--bg); border:1px solid var(--border); padding:14px; border-radius:10px; cursor:pointer; transition:all .15s ease }
.boardCard:hover { border-color:#505050; transform:translateY(-1px) }
.boardCard h4 { margin:0 0 6px 0; font-size:14px; font-weight:500; line-height:1.4 }
.boardCard p { margin:0; color:var(--muted); font-size:12px }
.cardFooter { margin-top:10px }
.cardFooter .due { font-size:11px; padding:3px 8px }

/* Comments Panel */
.commentsPanel { 
  position:fixed; right:24px; top:24px; bottom:24px; width:min(480px,calc(100vw - 48px)); 
  background:var(--panel); border:1px solid var(--border); border-radius:16px; 
  display:flex; flex-direction:column; box-shadow:0 20px 60px rgba(0,0,0,.4); 
  animation:slideIn .2s ease; z-index:100
}
.commentsHeader { display:flex; justify-content:space-between; align-items:flex-start; padding:20px 20px 12px; border-bottom:1px solid var(--border) }
.commentsHeader h2 { font-size:16px; margin:0; line-height:1.4; font-weight:500; padding-right:12px }
.closeBtn { font-size:18px; padding:4px 8px; color:var(--muted) }
.closeBtn:hover { color:var(--fg) }

.taskStatusBar { padding:12px 20px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:12px; font-size:13px }
.taskStatusBar select { 
  background:var(--bg); border:1px solid var(--border); color:var(--fg); padding:6px 12px; 
  border-radius:8px; font-size:13px; cursor:pointer; flex:1 
}

.commentsList { padding:16px 20px; overflow:auto; display:flex; flex-direction:column; gap:12px; flex:1 }
.commentItem { background:var(--bg); border:1px solid var(--border); border-radius:10px; padding:12px 14px }
.commentItem[data-author="TARS"] { border-color:#3b82f6; background:rgba(59,130,246,0.08) }
.commentMeta { font-size:11px; color:var(--muted); margin-bottom:6px }
.commentMeta strong { color:var(--fg) }
.commentBody { font-size:14px; line-height:1.5; white-space:pre-wrap }

.commentForm { padding:16px 20px; border-top:1px solid var(--border); display:flex; gap:10px }
.commentForm input { 
  flex:1; background:var(--bg); border:1px solid var(--border); color:var(--fg); 
  padding:12px 16px; border-radius:10px; font-size:14px 
}
.commentForm input:focus { outline:none; border-color:var(--accent) }
.commentForm input::placeholder { color:var(--muted) }
.commentForm button { 
  background:var(--fg); color:var(--bg); border:none; padding:12px 20px; 
  border-radius:10px; font-size:14px; font-weight:600; cursor:pointer; transition:opacity .15s 
}
.commentForm button:hover { opacity:0.9 }

/* Utility */
.loading, .empty, .emptyComments { color:var(--muted); text-align:center; padding:40px; font-size:14px }

@keyframes slideIn { from { opacity:.3; transform:translateX(20px) } to { opacity:1; transform:translateX(0) } }

/* Mobile */
@media (max-width:768px) { 
  .wrap { padding:16px }
  .summary { grid-template-columns:repeat(2,1fr) }
  .board { grid-template-columns:1fr }
  .commentsPanel { left:12px; right:12px; top:12px; bottom:12px; width:auto }
  .row { flex-direction:column }
  .meta { align-items:flex-start; flex-direction:row; justify-content:space-between }
}
